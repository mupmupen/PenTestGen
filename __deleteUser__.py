__author__ = 'cierpka'
import transaction

from ZODB_Handler import ZODBConnect


def deleteUser():
    path = "userinput.fs"
    db = ZODBConnect(path)
    dbroot = db.dbroot

    del_user = raw_input("Enter a user to delete here! \n")

    if del_user in dbroot['users']:

        answ = raw_input("Do you want to delete this user: %s? \t [yes/no] \n" % del_user)
        valid = raw_input("Do you really want to delete him and delete all of his generated files?\t [yes/no] \n")
        if answ == valid:
            del dbroot['users']
        else:
            print "Closing script!"
            exit()
    new_dict = dbroot['users']

    dbroot['users'] = new_dict
    print dbroot['users']
    transaction.commit()
    db.close()


if __name__ == "__main__":
    deleteUser()