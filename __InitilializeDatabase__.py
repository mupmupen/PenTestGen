__author__ = 'cierpka'

import os
import transaction
from ZODB_Handler import ZODBConnect


def initDB():
    path = "userinput.fs"
    current_dir = os.listdir("./")

    if path in current_dir:
        for file in current_dir:
            if file.__contains__('userinput'):
                os.remove(file)

    db = ZODBConnect(path)
    dbroot = db.dbroot

    dbroot['users'] = {'admin': {
        'password': "c7ad44cbad762a5da0a452f9e854fdc1e0e7a52a38015f23f3eab1d80b931dd472634dfac71cd34ebc35d16ab7fb8a90c81f975113d6c7538dc69dd8de9077ec"
        , 'data': {'projects': [1, 2, 3, 4], 'nojects': [5, 6, 7, 8, 9]}}}
    dbroot['vm'] = [['First Test VM', 'vm.vmdk']]
    dbroot['exercise'] = [['MITM', 'pdf']]
    transaction.commit()
    db.close()
    print "Initialisation completed"


if __name__ == "__main__":
    initDB()


