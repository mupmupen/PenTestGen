# Beispiele fuer ZODB-Vortrag
from ZODB import FileStorage, DB
import transaction


def saveDB():
    storage = FileStorage.FileStorage("test2.fs")
    db = DB(storage)
    connection = db.open()
    dbroot = connection.root()

    dbroot['a_number'] = 3
    dbroot['a_string'] = 'Gift'
    dbroot['a_list'] = [1, 2, 3, 5, 7, 12]
    dbroot['a_dictionary'] = {1918: 'Red Sox', 1919: 'Reds'}
    dbroot['deeply_nested'] = {
        1918: [('asdasdads Sox', 4), ('Cubs', 2)],
        1919: [('Reds', 5), ('White Sox', 3)],
    }
    transaction.commit()
    db.close()
    storage.close()
    connection.close()


def loadDB():
    storage = FileStorage.FileStorage("userinput.fs")
    db = DB(storage)
    connection = db.open()
    dbroot = connection.root()

    for key in dbroot.keys():
        print key + ':', dbroot[key]
    db.close
    for i in dbroot['users']['admin']['data']['projects']:
        print i
    if 'asd' in dbroot['users']:
        print 'pass'

#saveDB()
loadDB()